const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Index-ClHtw0hq.js",".pnpm-BUl7oEdQ.js","./rolldown-runtime-BvjVq7TH.js",".pnpm-Cb7Fgr0v.css","./Index-DwpGU71R.css","./Index-B9a06ICW.js","./Index-DpqZIAYq.css"])))=>i.map(i=>d[i]);
import{o as e}from"./rolldown-runtime-BvjVq7TH.js";import{$ as t,A as i,Ct as a,D as s,Dt as n,E as o,Et as r,J as l,L as d,M as c,N as m,O as u,Ot as p,P as h,R as v,S as w,St as g,T as f,Tt as y,U as x,V as b,X as k,_t as T,at as D,b as S,bt as A,dt as _,et as C,ft as I,gt as L,ht as O,it as E,j as V,k as M,lt as N,mt as P,nt as j,ot as z,pt as B,q as $,r as F,rt as R,tt as G,vt as J,wt as W,x as q,xt as Y,z as H}from"./.pnpm-BUl7oEdQ.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const i of e)if("childList"===i.type)for(const e of i.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var Q={};const U=function(e,t,i){let a=Promise.resolve();if(t&&t.length>0){const e=document.getElementsByTagName("link"),n=document.querySelector("meta[property=csp-nonce]"),o=n?.nonce||n?.getAttribute("nonce");s=t.map(t=>{if(t=function(e,t){return new URL(e,t).href}(t,i),t in Q)return;Q[t]=!0;const a=t.endsWith(".css"),s=a?'[rel="stylesheet"]':"";if(i)for(let i=e.length-1;i>=0;i--){const s=e[i];if(s.href===t&&(!a||"stylesheet"===s.rel))return}else if(document.querySelector(`link[href="${t}"]${s}`))return;const n=document.createElement("link");return n.rel=a?"stylesheet":"modulepreload",a||(n.as="script"),n.crossOrigin="",n.href=t,o&&n.setAttribute("nonce",o),document.head.appendChild(n),a?new Promise((e,i)=>{n.addEventListener("load",e),n.addEventListener("error",()=>i(new Error(`Unable to preload CSS for ${t}`)))}):void 0}),a=Promise.all(s.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))}var s;function n(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return a.then(t=>{for(const e of t||[])"rejected"===e.status&&n(e.reason);return e().catch(n)})};var X=[{path:"/",redirect:"/run",children:[{path:"/init",component:()=>U(()=>import("./Index-ClHtw0hq.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url)},{path:"/run",component:()=>U(()=>import("./Index-B9a06ICW.js"),__vite__mapDeps([5,1,2,3,6]),import.meta.url)}]}];const Z=G({history:C(),routes:X});var K={class:"applicationView"},ee=I({__name:"ApplicationView",setup:e=>(e,i)=>(O(),N("div",K,[_(y(t))]))}),te=class{static#e=this.sceneAnimationData={startTime:x.now(),endTime:x.addDays(x.now(),10,new x),speed:1};static init(e){this.viewer=e,this.sceneAnimationData.currentTime=this.viewer.clock.currentTime}static playSceneAnimation(e){const{startTime:t,endTime:i,speed:a,currentTime:s}=e;console.log("startTime",t,"endTime",i,"speed",a,"currentTime",s,this.viewer),this.viewer.clock.startTime=t.clone(),this.viewer.clock.stopTime=i.clone(),this.viewer.clock.currentTime=s.clone(),this.viewer.clock.multiplier=a,this.viewer.clock.shouldAnimate=!0,this.viewer.clock.clockRange=u.LOOP_STOP,this.viewer.timeline.zoomTo(t,i)}static stopSceneAnimation(){this.viewer.clock.shouldAnimate=!1}static backToStart(){this.viewer.clock.startTime=this.sceneAnimationData.startTime}static backToCurrentTime(){this.viewer.clock.currentTime=this.sceneAnimationData.currentTime}static backToEnd(){this.viewer.clock.stopTime=this.sceneAnimationData.endTime}static playFaster(e=2){this.viewer.clock.multiplier=this.sceneAnimationData.speed*e}static playSlower(e=.5){this.viewer.clock.multiplier=this.sceneAnimationData.speed*e}},ie=class{constructor(){this.animations=new Map}static#e=this.animations=new Map;static init(e){this.viewer=e,te.init(e)}static addAnimation(e,t){this.animations.set(e,t),this.addAnimationToDevice(t)}static deleteAnimation(e){const t=this.animations.get(e)?.device;t instanceof h?(t.availability=new M,t.position=new o,t.orientation=new o):t instanceof v&&(t.modelMatrix=new s($)),this.animations.delete(e)}static changeDeviceSpeed(e,t){let i=this.animations.get(e);if(!i)return;let{startTime:a,endTime:s}=i,n=x.secondsDifference(s,a);i.endTime=x.addSeconds(a,n/t,new x),this.addAnimationToDevice(i)}static getAnimation(e){return this.animations.get(e)}static addAnimationToDevice(e){const{description:t,startTime:i,endTime:a,device:n}=e,r=e.path.length;if(r<0)return;const c=r>1?x.secondsDifference(a,i)/(r-1):0;if(console.log(t,"动画设置"),n instanceof h)n.availability instanceof M||(n.availability=new M),n.position instanceof o||(n.position=new o),n.orientation instanceof s||(n.orientation=new s(b)),e.path.forEach((e,t)=>{n.position.addSample(x.addSeconds(i,c*t,new x),e.position),n.orientation=new f(n.position)}),n.availability.addInterval(new H({start:i,stop:a,isStartIncluded:!0,isStopIncluded:!0}));else{const t=new s($);e.path.forEach((e,a)=>{const s=b.fromHeadingPitchRoll(e.hpr),o=$.fromTranslationRotationScale(new d(e.position,s,new l(1,1,1)));t.addSample(x.addSeconds(i,c*a,new x),o),console.log("基元动画可能报错"),n.modelMatrix=t})}}},ae=class{static addImageryLayer(e){const{name:t,url:i,layerOrder:a}=e,s=new c({url:i,layers:t,parameters:{transparent:!0,format:"image/jpeg"}}),n=new V(s);this.viewer.imageryLayers.add(n,a)}static async add3DTilesLayer(e){const{name:t,url:a,layerOrder:s}=e;try{const e=await i.fromUrl(a,{enableCollision:!0});this.viewer.scene.primitives.add(e),this.viewer.flyTo(e)}catch(n){console.error(`Error creating tileset: ${n}`)}}};let se=function(e){return e.wms="wms",e.wmts="wmts",e.tileset="tileset",e.arcgis="arcgis",e}({});var ne=class{static async initViewer(e){m.defaultAccessToken="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI0OTIwNzY2YS0wOWIyLTQ2ZWYtODM3MC04Mzc1NzQ0ZjJkMTAiLCJpZCI6MjM3MjAwLCJpYXQiOjE3NTI3MTk2NzV9.8FjoYqy_FFFAXQ2M8i3V76m-dQv3jxyEpNYBH0x-SRg",this.viewer=new w(e,{shouldAnimate:!0,animation:!1,selectionIndicator:!1,infoBox:!1,homeButton:!0,fullscreenButton:!1,timeline:!0,sceneModePicker:!0,navigationHelpButton:!1,geocoder:!1,requestRenderMode:!0}),ae.viewer=this.viewer,ie.init(this.viewer)}static addLayer(e){const{name:t,url:i,layerOrder:a,type:s}=e;switch(s){case se.wms:case se.wmts:ae.addImageryLayer({name:t,url:i,layerOrder:a});break;case se.tileset:ae.add3DTilesLayer({name:t,url:i,layerOrder:a})}}},oe=(e,t)=>{const i=e.__vccOpts||e;for(const[a,s]of t)i[a]=s;return i},re={class:"container"},le={class:"menu-bar"},de=["onClick"],ce={class:"popup-header"},me={class:"group-header"},ue={class:"group-content"},pe=["onClick"],he={class:"thumbnail-img"},ve=["src"],we={class:"thumbnail-text"},ge=oe({__name:"index",setup(e){const t=W(""),i=W(""),s=W("场景库"),n=a([{id:"scene",text:"场景库",popup:"scene",content:"场景库"},{id:"model",text:"模型库",popup:"model",content:"模型库"},{id:"area",text:"区域标记",popup:"area",content:"区域标记"},{id:"camera",text:"摄像头库",popup:"camera",content:"摄像头库"},{id:"event",text:"事件管理",popup:"event",content:"事件管理"}]),o=a({scene:{id:"scene",text:"场景库",groups:[{id:"trainingA",text:"训练场A",items:[{id:1,text:"大雁塔景区",url:"dyt.png"},{id:2,text:"海南某工厂",url:"hainan.png"},{id:3,text:"某综合演练基地",url:"base.png"}]},{id:"trainingB",text:"训练场B",items:[{id:4,text:"通用模型1"},{id:5,text:"通用模型2"}]}]},model:{id:"model",text:"模型库",groups:[{id:"basic",text:"设施",items:[{id:1,text:"直升飞机",url:"helicopter.png"},{id:2,text:"基地"}]},{id:"advanced",text:"人员",items:[{id:6,text:"医护人员",url:"doctor.png"},{id:5,text:"伤患人员"}]},{id:"advanced1",text:"装备",items:[{id:5,text:"救护车1",url:"ambulance.png"},{id:6,text:"救护车2"}]}]},area:{id:"area",text:"区域标记",groups:[{id:"markType",text:"区域标记",items:[{id:1,text:"点标记"},{id:2,text:"线标记"},{id:3,text:"面标记"}]}]},camera:{id:"camera",text:"摄像头库",groups:[{id:"cameraList",text:"在线摄像头",items:[{id:1,text:"大门摄像头"},{id:2,text:"急症室摄像头"},{id:3,text:"走廊摄像头"}]}]},event:{id:"event",text:"事件管理",groups:[{id:"eventType",text:"事件类型",items:[{id:1,text:"类型A"},{id:2,text:"类型B"},{id:3,text:"类型C"},{id:4,text:"类型D"}]},{id:"eventRecord",text:"事件记录",items:[{id:5,text:"记录1"},{id:6,text:"记录2"}]}]}}),l=()=>{i.value=null};return(e,a)=>(O(),N("div",re,[z("div",le,[(O(!0),N(E,null,L(n,e=>(O(),N("div",{key:e.id,class:r(["menu-item",{active:t.value===e.id}]),onClick:a=>(e=>{t.value=e.id,i.value=e.popup,s.value=e.content})(e)},p(e.text),11,de))),128))]),(O(!0),N(E,null,L(o,e=>(O(),N("div",{key:e.id,class:r(["popup",{active:i.value===e.id}])},[z("button",{class:"close-btn",onClick:l},"×"),z("div",ce,p(e.text),1),(O(!0),N(E,null,L(e.groups,e=>(O(),N("div",{key:e.id,class:"group"},[z("div",me,[z("span",null,p(e.text)+" ("+p(e.items.length)+")",1)]),z("div",ue,[(O(!0),N(E,null,L(e.items,e=>(O(),N("div",{key:e.id,class:"thumbnail",onClick:t=>(e=>{switch(e.text){case"大雁塔景区":ae.add3DTilesLayer({name:"",url:"http://earthsdk.com/v/last/Apps/assets/dayanta/tileset.json",layerOrder:""});break;case"海南某工厂":ae.add3DTilesLayer({name:"",url:"http://61.182.25.62:8081/gisData/MAKJC/OSGB/QXMX/tileset.json",layerOrder:""});break;case"某综合演练基地":ae.add3DTilesLayer({name:"",url:"/3dtiles/qxsy/Data/tileset.json",layerOrder:""});break;case"直升飞机":const e=viewer.entities.add({position:Cesium.Cartesian3.fromDegrees(108.5,34.5,0),model:{uri:"/models/helicopter.glb",scale:1}});viewer.zoomTo(e);break;case"医护人员":const t=viewer.entities.add({position:Cesium.Cartesian3.fromDegrees(108.6,34.6,0),model:{uri:"/models/doctor.glb",scale:1}});viewer.zoomTo(t);break;case"救护车1":const i=viewer.entities.add({position:Cesium.Cartesian3.fromDegrees(108.7,34.7,0),model:{uri:"/models/ambulance.glb",scale:1}});viewer.zoomTo(i)}})(e)},[g(z("div",he,[z("img",{src:`/static/${e.url}`,style:{width:"100%"}},null,8,ve)],512),[[R,e.url]]),g(z("div",{class:"thumbnail-img"},p(e.text),513),[[R,!e.url]]),z("div",we,p(e.text),1)],8,pe))),128))])]))),128))],2))),128))]))}},[["__scopeId","data-v-91a517e5"]]),fe={class:"my-header"},ye={class:"my-header-title"},xe={class:"my-header-title-text"},be={__name:"CommonPanel",props:{modelValue:{type:Boolean,default:!1},title:{type:String,default:"面板"},width:{type:[String,Number],default:"300px"},height:{type:[String,Number],default:"437px"},top:{type:[String,Number],default:void 0},left:{type:[String,Number],default:void 0},right:{type:[String,Number],default:void 0},bottom:{type:[String,Number],default:void 0}},emits:["update:modelValue","close"],setup(e,{emit:t}){const i=e,a=t,s=W(i.modelValue);function o(){s.value=!1,a("update:modelValue",!1),a("close")}A(()=>i.modelValue,e=>s.value=e),A(s,e=>a("update:modelValue",e));const r=(e,t="vw")=>{return i=e,!isNaN(parseFloat(i))&&isFinite(i)?"vw"===t?parseFloat(e)/1920*100+"vw":(e=>parseFloat(e)/1080*100+"vh")(e):("string"==typeof e&&e.endsWith("px"),e);var i},l=D(()=>{const e={position:"absolute",zIndex:1e3,opacity:1,background:"rgba(23, 65, 75, 1)",border:"1px solid rgba(31, 155, 170, 1)",width:r(i.width,"vw"),height:r(i.height,"vh")};return void 0!==i.top&&(e.top=r(i.top,"vh")),void 0!==i.left&&(e.left=r(i.left,"vw")),void 0!==i.right&&(e.right=r(i.right,"vw")),void 0!==i.bottom&&(e.bottom=r(i.bottom,"vh")),e});return(t,i)=>{const a=J("el-icon");return g((O(),N("div",{class:"common-panel-wrapper",style:n(l.value)},[z("div",fe,[z("div",ye,[i[0]||(i[0]=z("div",{class:"my-header-title-icon"},null,-1)),z("span",xe,p(e.title),1)]),z("div",{class:"my-header-close",onClick:o},[_(a,{class:"el-icon--left"})])]),T(t.$slots,"default")],4)),[[R,s.value]])}}};const ke=new(e(S(),1).BaseClass);var Te={style:{height:"400px",padding:"20px"}},De=oe({__name:"TimeGantt",setup(e){const t=W(!1),i={showAvatar:!1,showTitle:!0,showProgress:!1,dragThreshold:8,resizeHandleWidth:8,enableDragDelay:!0,dragDelayTime:200},a={columns:[{key:"name",label:"任务名称",width:100,visible:!1},{key:"startDate",label:"开始时间",visible:!0},{key:"endDate",label:"结束时间",visible:!0}],defaultWidth:580,minWidth:100,maxWidth:1200,showAllColumns:!1},s={showAddTask:!0,showAddMilestone:!1,showTodayLocate:!0,showExportCsv:!0,showExportPdf:!0,showLanguage:!0,showTheme:!0,showFullscreen:!0,showTimeScale:!0,timeScaleDimensions:["hour","day","week"],defaultTimeScale:"hour",showExpandCollapse:!0};function n(e){const t=new Date(Date.now()+60*e*1e3);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`}const o=W([]);let r=W(""),l=W("");return ke.on("setTimeGantt",function(e){localStorage.setItem("gantt-theme","dark");let i=e.data||{};r.value=n(0);let a=0,s=[];for(let t in i){let e={chessPieceId:"",markGridsVos:[]},o=i[t]||[],r=0,l=n(r),d=[];o.forEach(t=>{e.chessPieceId=t.operationDeploymentId,e.markGridsVos.push(...t.markGridsVos);let i=Number(t.executionTime)||10,s=n(r);a+=i,r+=i;let o=n(r),l=t.markGridsVos||[],c="";l.length>0&&(c=l[0].id);let m={id:t.id,name:c,startDate:s,endDate:o,progress:100,color:"#00ff00"};d.push(m)}),(void 0)(e);let c={id:t,name:t,startDate:l,endDate:n(r),progress:100,color:"#ff0000",children:d};s.push(c)}o.value=s,l.value=n(a),console.log(o.value),t.value=!0}),P(()=>{}),(e,t)=>(O(),N("div",Te,[_(y(q),{"task-list-config":a,"task-bar-config":i,"toolbar-config":s,useDefaultDrawer:!0,tasks:o.value},null,8,["tasks"])]))}},[["__scopeId","data-v-a9133be3"]]),Se={class:"op-btn"},Ae=oe(I({__name:"CesiumSDk",setup(e){const t=W(!0),i=W();function a(){i.value&&(i.value.style.width=window.innerWidth+"px",i.value.style.height=window.innerHeight+"px")}return P(()=>{ne.initViewer(i.value)}),B(()=>{window.removeEventListener("resize",a)}),(e,a)=>(O(),N(E,null,[z("div",{id:"cesium-sdk",ref_key:"cesiumSdk",ref:i},null,512),_(ge),_(be,{left:20,bottom:20,width:"96vw",height:400,modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value=e),title:"事件管理"},{default:Y(()=>[_(De)]),_:1},8,["modelValue"]),z("div",Se,[z("div",{onClick:a[1]||(a[1]=e=>t.value=!t.value),class:"my-header-title-icon moresmsg-btn"})])],64))}}),[["__scopeId","data-v-c01ff5a5"]]),_e={class:"app"},Ce=j(I({__name:"App",setup:e=>(e,t)=>(O(),N("div",_e,[_(Ae),_(ee)]))}));Ce.use(Z);var Ie=k();Ce.use(Ie),Ce.use(F),Ce.mount("#app");export{te as a,ie as i,ne as n,ae as r,oe as t};